@model IEnumerable<ContosoUniversity_TARpe21.Models.InstructorIndexdata>
@{
    ViewData["Title"] = "Index";
}

<h2>Instructors</h2>
<p>
    <a asp-action="Create">Create New</a>
</p>
<table class="table">
    <thead>
<tr>

    <th>Last Name</th>
        <th>First Name</th>
        <th>Hire Date</th>
        <th>Office</th>
        <th>Courses</th>
        <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach(var item in Model.Instructors)
        {
            string selectedRow = "";
            if(item.ID ==(int?)ViewData["InstructorID"])
            {
                selectedRow = "";
            }
        }
        <td>
            @Html.DisplayFor(modelItem => item.FullName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CourseAssignments)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.HireDate)
        </td>

        <td>
            @{
                foreach(var courses in item.CourseAssignments)
                {
                    @courses.Course.CourseID @: @courses.Course.Title <br/>
                }
            }

        </td>

        <td>
            <a asp-action="Edit" asp-route-id="@item.ID">Edit</a>
            <a asp-action="Details" asp-route-id="@item.ID">Details</a>
            <a asp-action="Delete" asp-route-id="@item.ID">Delete</a>
        </td>
    </tr>
    </table>


@if(Model.Courses!=null)
{
    <h3>Courses taught by the selected Instructor:</h3>
    <table class="table">
        <tr>
            <th></th>
            <th>Number</th>
            <th>Title</th>
            <th>Department</th>
        </tr>
        @foreach(var item in Model.Courses)
        {
            string selectedRow = "";
            if(item.CourseID == (int?)ViewData["CourseID"])
            {
                selectedRow = "table-success";
            }
            <tr class="@selectedRow">
                <td>
                    @Html.ActionLink("Select","Index", new(CourseId = item.CourseID))
                </td>
                <td>
                    @item.CourseID
                </td>
                <td>
                    @item.Department.Name
                </td>
            </tr>
        }
    </table>
}
@if ( Model.Enrollments != null)
{
    <h3>Students Enrolled in the Selected Course</h3>
    <table class="table">
        <tr>Name</tr> 
        <tr>Grade</tr>
        @foreach (var item in Model.Enrollments)
        {
            <tr>
                <td>@item.Student.FullName</td>
                <td>@Html.DisplayFor(modelItem => item.Grade)</td>
            </tr>
        }
    </table>
}